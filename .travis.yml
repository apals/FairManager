language: node_js
node_js:
- 5.9.0
matrix:
  fast_finish: true
  allow_failures:
  - node_js: 5.1.1
before_script:
- npm install -g bower grunt-cli
- gem install sass
- bower install
script:
- grunt
services: mongodb
after_success:
  # Turn off warnings about SSH keys:
  - echo "Host heroku.com" >> ~/.ssh/config
  - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
  - echo "   CheckHostIP no" >> ~/.ssh/config
  - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
  # Clear your current Heroku SSH keys:
  - heroku keys:clear
  # Add a new SSH key to Heroku
  - yes | heroku keys:add
  # Clone Heroku deployment repo to dist folder
  - git clone git@heroku.com:qurrus-web-prod.git dist
  # Build
  - grunt build
  # Commit and Push dist folder to Heroku
  - cd dist
  - git config --global user.name "Andreas PÃ¥lsson"
  - git config --global user.email "apals@kth.se"
  - git add * --force
  - git commit -am "Travis CI"
  - git push origin master
env:
  global:
    secure: c6nMWP0oRkrO2WVRBJZDRYBxBl51K04NkfS4orFt261jfNNYnVqJU689W6Mx70+MARVDWWOV9zic8J8Dz/kgQcTn0NWhvj07lmiNYFoW5ZIvhgXCgRHKDRJGIvZdyaITUVHeseY7axdwmgi3Z1zNgcD/seQWPNc06SYr7yVF32gYA6xr0gybmjh0+d/tGm3jkJfQ2BzNQoICJC4WmPTP4aw+bHc0VHTZhAqFOwLdQiiNfXac8T/PZQ0AERy1c8Bil80vkp26ohEl36RJejVanaq5CigafKgfNaQu7anho3QXNJIcBIf4XSN1ZSbXQjcRhP9pyDZoXhck8yS8hmV9rdVhp+kBgpgo8c60dWb24YzZsO28RjFPE92MSbZUkXX3Pdj4ZIaMhA1fdPZ0ioUKL426KiPDIcnzu3LY5SyNx/so2Bsz6l3mpTvGAWLycG4o6X0piYlZvS2S3ZGVe2rLn1Aw1svtNC9peGAE2QL3XeetJDQ1cyIfXIKv2iVYpE1Ka0ruqbsl5+1G3M96lEN/iHOUdUG7CHLIbsnwygy/LMaakjvZQcdyrf4uEKzSmQlZXrLBBAbcxVlWMeDh5C4lIABHBvgXzaYAX0h8koikB1RwkUJw+uQv6cXB5aZv3nc8BXudwF9PcRcL42LcipBYUI8+THzjbm2zoqEPkiHuXoI=
